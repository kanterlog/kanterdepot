<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mot-m√©l√© interactif</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            max-width: 900px;
            width: 100%;
        }

        h1 {
            text-align: center;
            color: #4a5568;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        .game-area {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .grid-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(16, 1fr);
            gap: 2px;
            background: #4a5568;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .cell {
            width: 35px;
            height: 35px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            user-select: none;
            transition: all 0.2s;
            border-radius: 4px;
        }

        .cell:hover {
            background: #e2e8f0;
            transform: scale(1.05);
        }

        .cell.selected {
            background: #ffd700;
            color: #2d3748;
        }

        .cell.found {
            background: #48bb78;
            color: white;
        }

        .words-list {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            min-width: 200px;
        }

        .words-list h3 {
            margin-top: 0;
            color: #4a5568;
            text-align: center;
            margin-bottom: 15px;
        }

        .word-item {
            padding: 8px 12px;
            margin: 5px 0;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .word-item:hover {
            background: #e2e8f0;
        }

        .word-item.found {
            background: #48bb78;
            color: white;
            text-decoration: line-through;
        }

        .word-item.selected {
            border-color: #ffd700;
            background: #fffbeb;
        }

        .controls {
            text-align: center;
            margin: 20px 0;
        }

        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin: 0 10px;
            transition: all 0.2s;
        }

        .btn:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }

        .score {
            text-align: center;
            font-size: 20px;
            color: #4a5568;
            margin: 10px 0;
        }

        .success-message {
            background: #48bb78;
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
            display: none;
        }

        @media (max-width: 768px) {
            .game-area {
                flex-direction: column;
            }
            
            .cell {
                width: 28px;
                height: 28px;
                font-size: 14px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .container {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Mot-m√©l√© Interactif</h1>
        
        <div class="score">
            Mots trouv√©s: <span id="score">0</span>/23
        </div>

        <div class="controls">
            <button class="btn" onclick="resetSelection()">Effacer s√©lection</button>
            <button class="btn" onclick="newGame()">Nouvelle grille</button>
        </div>

        <div class="success-message" id="successMessage">
            üéâ F√©licitations ! Vous avez trouv√© tous les mots ! üéâ
        </div>

        <div class="game-area">
            <div class="grid-container">
                <div class="grid" id="grid"></div>
            </div>
            
            <div class="words-list">
                <h3>Mots √† trouver</h3>
                <div id="wordsList"></div>
            </div>
        </div>
    </div>

    <script>
        const words = [
            'COLISEE', 'AMPHITHEATRE', 'ROMAIN', 'ANTIQUITE', 
            'CONSTRUCTION', 'MATERIAU', 'QUALITE', 'IMMENSE', 'GRAND',
            'ACCUEILLIR', 'SPECTACLE', 'GRATUIT', 'COMBAT',
            'GLADIATEUR', 'ANIMAL', 'SAUVAGE', 'NOM', 'COLOSSE', 'STATUE',
            'NERON', 'GIGANTESQUE', 'EMPEREUR', 'PROXIMITE', 'RUINE'
        ];

        const selectedWords = [
            'COLISEE', 'AMPHITHEATRE', 'ROMAIN', 'ANTIQUITE', 
            'CONSTRUCTION', 'MATERIAU', 'QUALITE', 'IMMENSE', 'GRAND',
            'ACCUEILLIR', 'SPECTACLE', 'GRATUIT', 'COMBAT',
            'GLADIATEUR', 'ANIMAL', 'SAUVAGE', 'COLOSSE', 'STATUE',
            'NERON', 'GIGANTESQUE', 'EMPEREUR', 'PROXIMITE', 'RUINE'
        ];

        let grid = [];
        let foundWords = [];
        let selectedCells = [];
        let isSelecting = false;
        let currentDirection = null;

        function createGrid() {
            grid = Array(14).fill().map(() => Array(16).fill(''));
            foundWords = [];
            selectedCells = [];
            
            // Place words in grid
            selectedWords.forEach(word => {
                placeWord(word);
            });
            
            // Fill empty cells with random letters
            fillEmptyCells();
            
            // Render grid and words list
            renderGrid();
            renderWordsList();
            updateScore();
        }

        function placeWord(word) {
            let placed = false;
            let attempts = 0;
            
            while (!placed && attempts < 200) {
                const horizontal = Math.random() < 0.5;
                let row, col;
                
                if (horizontal) {
                    // Horizontal placement
                    if (word.length > 16) {
                        attempts++;
                        continue; // Skip words too long for horizontal placement
                    }
                    row = Math.floor(Math.random() * 14);
                    col = Math.floor(Math.random() * Math.max(1, 16 - word.length + 1));
                    
                    // Ensure we don't go out of bounds
                    if (col + word.length > 16) {
                        attempts++;
                        continue;
                    }
                    
                    // Check if space is available
                    let canPlace = true;
                    for (let i = 0; i < word.length; i++) {
                        if (row >= 14 || col + i >= 16 || (grid[row][col + i] !== '' && grid[row][col + i] !== word[i])) {
                            canPlace = false;
                            break;
                        }
                    }
                    
                    if (canPlace) {
                        for (let i = 0; i < word.length; i++) {
                            grid[row][col + i] = word[i];
                        }
                        placed = true;
                    }
                } else {
                    // Vertical placement
                    if (word.length > 14) {
                        attempts++;
                        continue; // Skip words too long for vertical placement
                    }
                    row = Math.floor(Math.random() * Math.max(1, 14 - word.length + 1));
                    col = Math.floor(Math.random() * 16);
                    
                    // Ensure we don't go out of bounds
                    if (row + word.length > 14) {
                        attempts++;
                        continue;
                    }
                    
                    // Check if space is available
                    let canPlace = true;
                    for (let i = 0; i < word.length; i++) {
                        if (row + i >= 14 || col >= 16 || (grid[row + i][col] !== '' && grid[row + i][col] !== word[i])) {
                            canPlace = false;
                            break;
                        }
                    }
                    
                    if (canPlace) {
                        for (let i = 0; i < word.length; i++) {
                            grid[row + i][col] = word[i];
                        }
                        placed = true;
                    }
                }
                
                attempts++;
            }
        }

        function fillEmptyCells() {
            const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            for (let i = 0; i < 14; i++) {
                for (let j = 0; j < 16; j++) {
                    if (grid[i][j] === '') {
                        grid[i][j] = letters[Math.floor(Math.random() * letters.length)];
                    }
                }
            }
        }

        function renderGrid() {
            const gridElement = document.getElementById('grid');
            gridElement.innerHTML = '';
            
            for (let i = 0; i < 14; i++) {
                for (let j = 0; j < 16; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.textContent = grid[i][j];
                    cell.dataset.row = i;
                    cell.dataset.col = j;
                    
                    // Touch events for iPad
                    cell.addEventListener('touchstart', handleCellTouch, { passive: false });
                    cell.addEventListener('touchmove', handleCellMove, { passive: false });
                    cell.addEventListener('touchend', handleCellTouchEnd, { passive: false });
                    
                    // Mouse events for desktop
                    cell.addEventListener('mousedown', handleCellClick);
                    cell.addEventListener('mouseover', handleCellHover);
                    cell.addEventListener('mouseup', handleCellRelease);
                    
                    gridElement.appendChild(cell);
                }
            }
        }

        function renderWordsList() {
            const wordsListElement = document.getElementById('wordsList');
            wordsListElement.innerHTML = '';
            
            selectedWords.forEach(word => {
                const wordElement = document.createElement('div');
                wordElement.className = 'word-item';
                wordElement.textContent = word;
                
                if (foundWords.includes(word)) {
                    wordElement.classList.add('found');
                }
                
                wordsListElement.appendChild(wordElement);
            });
        }

        function handleCellTouch(e) {
            e.preventDefault();
            const row = parseInt(e.target.dataset.row);
            const col = parseInt(e.target.dataset.col);
            startSelection(row, col);
        }

        function handleCellMove(e) {
            e.preventDefault();
            if (!isSelecting) return;
            
            const touch = e.touches[0];
            const element = document.elementFromPoint(touch.clientX, touch.clientY);
            if (element && element.classList.contains('cell')) {
                const row = parseInt(element.dataset.row);
                const col = parseInt(element.dataset.col);
                continueSelection(row, col);
            }
        }

        function handleCellTouchEnd(e) {
            e.preventDefault();
            endSelection();
        }

        function handleCellClick(e) {
            const row = parseInt(e.target.dataset.row);
            const col = parseInt(e.target.dataset.col);
            startSelection(row, col);
        }

        function handleCellHover(e) {
            if (!isSelecting) return;
            const row = parseInt(e.target.dataset.row);
            const col = parseInt(e.target.dataset.col);
            continueSelection(row, col);
        }

        function handleCellRelease() {
            endSelection();
        }

        function startSelection(row, col) {
            isSelecting = true;
            selectedCells = [{row, col}];
            currentDirection = null;
            updateCellStyles();
        }

        function continueSelection(row, col) {
            if (selectedCells.length === 0) return;
            
            const start = selectedCells[0];
            const deltaRow = row - start.row;
            const deltaCol = col - start.col;
            
            // Determine direction (horizontal or vertical only)
            let newDirection = null;
            if (deltaRow === 0 && deltaCol !== 0) {
                newDirection = 'horizontal';
            } else if (deltaCol === 0 && deltaRow !== 0) {
                newDirection = 'vertical';
            }
            
            if (newDirection && (!currentDirection || currentDirection === newDirection)) {
                currentDirection = newDirection;
                selectedCells = [];
                
                if (currentDirection === 'horizontal') {
                    const minCol = Math.min(start.col, col);
                    const maxCol = Math.max(start.col, col);
                    for (let c = minCol; c <= maxCol; c++) {
                        selectedCells.push({row: start.row, col: c});
                    }
                } else if (currentDirection === 'vertical') {
                    const minRow = Math.min(start.row, row);
                    const maxRow = Math.max(start.row, row);
                    for (let r = minRow; r <= maxRow; r++) {
                        selectedCells.push({row: r, col: start.col});
                    }
                }
                
                updateCellStyles();
            }
        }

        function endSelection() {
            if (selectedCells.length > 1) {
                checkForWord();
            }
            isSelecting = false;
        }

        function checkForWord() {
            const selectedLetters = selectedCells.map(cell => grid[cell.row][cell.col]).join('');
            const reversedLetters = selectedLetters.split('').reverse().join('');
            
            const foundWord = selectedWords.find(word => 
                word === selectedLetters || word === reversedLetters
            );
            
            if (foundWord && !foundWords.includes(foundWord)) {
                foundWords.push(foundWord);
                markCellsAsFound();
                updateScore();
                renderWordsList();
                
                if (foundWords.length === selectedWords.length) {
                    showSuccess();
                }
            }
            
            selectedCells = [];
            updateCellStyles();
        }

        function markCellsAsFound() {
            selectedCells.forEach(cell => {
                const cellElement = document.querySelector(`[data-row="${cell.row}"][data-col="${cell.col}"]`);
                cellElement.classList.add('found');
            });
        }

        function updateCellStyles() {
            // Remove all selection styles
            document.querySelectorAll('.cell').forEach(cell => {
                cell.classList.remove('selected');
            });
            
            // Add selection styles to current selection
            selectedCells.forEach(cell => {
                const cellElement = document.querySelector(`[data-row="${cell.row}"][data-col="${cell.col}"]`);
                if (!cellElement.classList.contains('found')) {
                    cellElement.classList.add('selected');
                }
            });
        }

        function updateScore() {
            document.getElementById('score').textContent = foundWords.length;
        }

        function showSuccess() {
            document.getElementById('successMessage').style.display = 'block';
        }

        function resetSelection() {
            selectedCells = [];
            isSelecting = false;
            currentDirection = null;
            updateCellStyles();
        }

        function newGame() {
            document.getElementById('successMessage').style.display = 'none';
            createGrid();
        }

        // Prevent default touch behaviors
        document.addEventListener('touchmove', function(e) {
            e.preventDefault();
        }, { passive: false });

        // Initialize game
        createGrid();
    </script>
</body>
</html>
