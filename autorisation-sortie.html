<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulaire de demande d'autorisation de sortie scolaire sans nuit√©e</title>
    <style>
        /* ... (garde ici tous tes styles inchang√©s, pas besoin de r√©p√©ter tout ce qui est d√©j√† ok) ... */
        /* Je garde tout comme dans ta version initiale, pas de modification du style */
        :root {
            --primary-color: #1e3a8a;
            --primary-hover: #1e40af;
            --secondary-color: #8b5cf6;
            --secondary-hover: #7c3aed;
            --accent-green: #22c55e;
            --accent-green-hover: #16a34a;
            --accent-orange: #f97316;
            --accent-orange-hover: #ea580c;
            --success-color: #22c55e;
            --success-hover: #16a34a;
            --warning-color: #f97316;
            --danger-color: #dc2626;
            --background-color: #f8fafc;
            --card-background: #ffffff;
            --border-color: #e5e7eb;
            --text-primary: #111827;
            --text-secondary: #6b7280;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        /* ...le reste de tes styles ici... */
        * { box-sizing: border-box; }
        body { /* ... */ }
        .form-container { /* ... */ }
        .logo-header { /* ... */ }
        .logo { /* ... */ }
        .logo-text { /* ... */ }
        .logo-title { /* ... */ }
        .logo-subtitle { /* ... */ }
        .header { /* ... */ }
        .section-title { /* ... */ }
        .section-title::before { /* ... */ }
        .form-row { /* ... */ }
        .form-row label { /* ... */ }
        .checkbox-group { /* ... */ }
        .checkbox-group-inline { /* ... */ }
        .checkbox-group label, .checkbox-group-inline label { /* ... */ }
        .checkbox-group label:hover, .checkbox-group-inline label:hover { /* ... */ }
        .checkbox-group input[type="checkbox"], .checkbox-group-inline input[type="checkbox"] { /* ... */ }
        .form-input { /* ... */ }
        .form-input:focus { /* ... */ }
        .form-input:invalid { /* ... */ }
        .form-input-short { /* ... */ }
        .form-input-medium { /* ... */ }
        .table { /* ... */ }
        .table th, .table td { /* ... */ }
        .table th { /* ... */ }
        .table input { /* ... */ }
        .table input:focus { /* ... */ }
        .visa-section { /* ... */ }
        .decision-section { /* ... */ }
        .signature-row { /* ... */ }
        .signature-area { /* ... */ }
        .footer { /* ... */ }
        .toolbar { /* ... */ }
        .btn { /* ... */ }
        .btn:hover { /* ... */ }
        .btn:active { /* ... */ }
        .btn-secondary { /* ... */ }
        .btn-secondary:hover { /* ... */ }
        .btn-success { /* ... */ }
        .btn-success:hover { /* ... */ }
        .btn-warning { /* ... */ }
        .btn-warning:hover { /* ... */ }
        .btn-danger { /* ... */ }
        .btn-danger:hover { /* ... */ }
        .btn-small { /* ... */ }
        .row-inline { /* ... */ }
        .validation-message { /* ... */ }
        .success-message { /* ... */ }
        .progress-bar { /* ... */ }
        .progress-fill { /* ... */ }
        .required { color: var(--danger-color); }
        @media (max-width: 768px) { /* ... */ }
        @media print { /* ... */ }
        .auto-save-indicator { /* ... */ }
        .auto-save-indicator.show { /* ... */ }
        .integrated-logo { width: 100px; height: auto; }
    </style>
</head>
<body>
    <div class="auto-save-indicator" id="autoSaveIndicator">
        ‚úì Sauvegard√© automatiquement
    </div>
    <div class="toolbar">
        <div class="progress-bar">
            <div class="progress-fill" id="progressBar"></div>
        </div>
        <button class="btn" onclick="clearForm()">
            <span>üÜï</span> Nouveau formulaire
        </button>
        <button class="btn btn-secondary" onclick="saveForm()">
            <span>üíæ</span> Sauvegarder
        </button>
        <button class="btn btn-secondary" onclick="loadForm()">
            <span>üìÇ</span> Charger
        </button>
        <button class="btn btn-warning" onclick="exportToPDF()">
            <span>üìÑ</span> Exporter PDF
        </button>
        <button class="btn btn-success" onclick="window.print()">
            <span>üñ®Ô∏è</span> Imprimer
        </button>
    </div>

    <div class="validation-message" id="validationMessage"></div>
    <div class="success-message" id="successMessage"></div>

    <div class="form-container">
        <div class="logo-header">
            <!-- SVG logo ici, inchang√© -->
            <svg class="integrated-logo" viewBox="0 0 400 600" xmlns="http://www.w3.org/2000/svg">
                <!-- Reproduction du logo Saint-Jean-de-la-Barre -->
                <path d="M50 100 Q200 50 350 100 L340 120 Q200 70 60 120 Z" fill="#1e3a8a"/>
                <path d="M50 500 Q200 450 350 500 L340 520 Q200 470 60 520 Z" fill="#1e3a8a"/>
                <rect x="80" y="350" width="60" height="8" fill="#1e3a8a"/>
                <rect x="80" y="370" width="80" height="8" fill="#1e3a8a"/>
                <rect x="80" y="390" width="100" height="8" fill="#1e3a8a"/>
                <g transform="translate(120, 150)">
                    <circle cx="0" cy="0" r="25" fill="#8b5cf6"/>
                    <path d="M-30 20 Q0 -10 30 20 Q20 60 -20 60 Z" fill="#8b5cf6"/>
                </g>
                <g transform="translate(200, 130)">
                    <circle cx="0" cy="0" r="20" fill="#22c55e"/>
                    <path d="M-25 15 Q0 -5 25 15 Q20 45 -20 45 Z" fill="#22c55e"/>
                </g>
                <g transform="translate(280, 150)">
                    <circle cx="0" cy="0" r="25" fill="#f97316"/>
                    <path d="M-30 20 Q0 -10 30 20 Q25 65 -25 65 Z" fill="#f97316"/>
                </g>
                <text x="200" y="300" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1e3a8a">DEVENIR</text>
                <text x="200" y="320" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1e3a8a">MEILLEUR...</text>
                <text x="200" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1e3a8a">ENSEMBLE</text>
                <text x="60" y="450" font-family="Arial, sans-serif" font-size="32" font-weight="bold" fill="#8b5cf6">Saint</text>
                <text x="160" y="450" font-family="Arial, sans-serif" font-size="32" font-weight="bold" fill="#22c55e">Jean</text>
                <text x="60" y="480" font-family="Arial, sans-serif" font-size="20" font-weight="normal" fill="#1e3a8a">de la</text>
                <text x="140" y="480" font-family="Arial, sans-serif" font-size="32" font-weight="bold" fill="#f97316">Barre</text>
            </svg>
            <div class="logo-text">
                <h1 class="logo-title">Saint-Jean-de-la-Barre</h1>
                <p class="logo-subtitle">Devenir meilleur... ensemble</p>
            </div>
        </div>

        <div class="header">
            Formulaire de demande d'autorisation d'une sortie scolaire<br>
            sans nuit√©e
        </div>

        <!-- ... Toute la partie formulaire inchang√©e ... -->

        <div class="section-title">üë• √âquipe d'encadrement</div>

        <!-- LE TABLEAU ACCOMPAGNATEUR AVEC SELECT -->
        <table class="table" id="equipe-table">
            <thead>
                <tr>
                    <th>Qualit√© <span class="required">*</span></th>
                    <th>Nom <span class="required">*</span></th>
                    <th>Pr√©nom <span class="required">*</span></th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="equipe-tbody">
                <tr>
                    <td>
                        <select class="equipe-qualite" required>
                            <option value="">S√©lectionner...</option>
                            <option value="parent">parent</option>
                            <option value="aesh">aesh</option>
                            <option value="asem">asem</option>
                            <option value="enseignant">enseignant</option>
                        </select>
                    </td>
                    <td><input type="text" class="equipe-nom" placeholder="Nom" required></td>
                    <td><input type="text" class="equipe-prenom" placeholder="Pr√©nom" required></td>
                    <td><button type="button" onclick="removeRow(this)" class="btn btn-danger btn-small">Supprimer</button></td>
                </tr>
                <tr>
                    <td>
                        <select class="equipe-qualite" required>
                            <option value="">S√©lectionner...</option>
                            <option value="parent">parent</option>
                            <option value="aesh">aesh</option>
                            <option value="asem">asem</option>
                            <option value="enseignant">enseignant</option>
                        </select>
                    </td>
                    <td><input type="text" class="equipe-nom" placeholder="Nom" required></td>
                    <td><input type="text" class="equipe-prenom" placeholder="Pr√©nom" required></td>
                    <td><button type="button" onclick="removeRow(this)" class="btn btn-danger btn-small">Supprimer</button></td>
                </tr>
            </tbody>
        </table>
        <button type="button" onclick="addRow()" class="btn btn-success" style="margin-bottom: 20px;">
            <span>‚ûï</span> Ajouter une personne
        </button>

        <!-- ... Reste du formulaire inchang√© ... -->

        <div class="visa-section">
            <div class="section-title">‚úÖ Visa</div>
            <!-- ... -->
        </div>
        <div class="footer">
            Formulaire de demande d'autorisation d'une sortie scolaire sans nuit√©e ‚Äî Saint-Jean-de-la-Barre
        </div>
    </div>

    <script>
        let autoSaveTimer;
        document.addEventListener('DOMContentLoaded', function() {
            updateProgress();
            setupAutoSave();
            setupValidation();
        });

        // FONCTION AJOUT DE LIGNE ACCOMPAGNATEUR MODIFI√âE
        function addRow() {
            let tbody = document.getElementById('equipe-tbody');
            let newRow = document.createElement('tr');
            newRow.innerHTML = `
                <td>
                    <select class="equipe-qualite" required>
                        <option value="">S√©lectionner...</option>
                        <option value="parent">parent</option>
                        <option value="aesh">aesh</option>
                        <option value="asem">asem</option>
                        <option value="enseignant">enseignant</option>
                    </select>
                </td>
                <td><input type="text" class="equipe-nom" placeholder="Nom" required></td>
                <td><input type="text" class="equipe-prenom" placeholder="Pr√©nom" required></td>
                <td><button type="button" onclick="removeRow(this)" class="btn btn-danger btn-small">Supprimer</button></td>
            `;
            tbody.appendChild(newRow);
        }
        function removeRow(btn) {
            let row = btn.closest('tr');
            row.parentNode.removeChild(row);
        }

        // Le reste de tes fonctions (clearForm, saveForm, loadForm, exportToPDF, updateProgress, setupAutoSave, setupValidation, etc.) restent inchang√©es.

        // ... (Ton JS existant ici) ...
    </script>
</body>
</html>
