<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Dict√©e anim√©e - Zheng He</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f0f4f8;
      color: #1e293b;
      padding: 30px;
      max-width: 960px;
      margin: auto;
    }
    h1 {
      text-align: center;
      color: #1d4ed8;
    }
    .word-display {
      text-align: center;
      font-size: 2.2rem;
      padding: 30px;
      margin: 40px 0;
      background: #ffffff;
      border-radius: 16px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.05);
      min-height: 70px;
    }
    .controls {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin: 10px 0;
    }
    button {
      padding: 10px 16px;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
      background: #3b82f6;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #2563eb;
    }
    .player-block {
      margin: 30px 0;
      padding: 20px;
      background: #e0e7ff;
      border-radius: 12px;
    }
    audio {
      display: block;
      margin: 10px auto;
      width: 100%;
    }
  </style>
</head>
<body>
  <h1>üìö Dict√©e anim√©e - Zheng He</h1>

  <!-- Bloc dict√©e mot √† mot -->
  <div class="player-block">
    <h2>1. Dict√©e mot √† mot (avec erreurs visuelles)</h2>
    <audio id="audioSlow" src="version lente.mp3"></audio>
    <div class="controls">
      <button onclick="document.getElementById('audioSlow').play()">‚ñ∂Ô∏è Lecture</button>
      <button onclick="document.getElementById('audioSlow').pause()">‚è∏Ô∏è Pause</button>
      <button onclick="audioJump('audioSlow', -5)">‚è™ -5s</button>
      <button onclick="audioJump('audioSlow', 5)">‚è© +5s</button>
    </div>
  </div>

  <div class="word-display" id="wordDisplay">Clique sur Lecture</div>

  <!-- Bloc relecture finale -->
  <div class="player-block">
    <h2>2. Relecture finale</h2>
    <audio id="audioNormal" src="version normale de relecture (1).mp3"></audio>
    <div class="controls">
      <button onclick="document.getElementById('audioNormal').play()">‚ñ∂Ô∏è Lecture</button>
      <button onclick="document.getElementById('audioNormal').pause()">‚è∏Ô∏è Pause</button>
      <button onclick="audioJump('audioNormal', -5)">‚è™ -5s</button>
      <button onclick="audioJump('audioNormal', 5)">‚è© +5s</button>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Timings g√©n√©r√©s par Whisper
      const timedWords = [
        { word: "Zheng", start: 0.15 },
        { word: "He", start: 0.60 },
        { word: "est", start: 1.00 },
        { word: "un", start: 1.36 },
        { word: "grand", start: 1.71 },
        { word: "navigateur", start: 2.14 },
        { word: "chinois", start: 2.63 },
        { word: "du", start: 3.06 },
        { word: "XVe", start: 3.19 },
        { word: "si√®cle.", start: 3.56 },
        { word: "Il", start: 4.12 },
        { word: "est", start: 4.32 },
        { word: "n√©", start: 4.48 },
        { word: "dans", start: 4.72 },
        { word: "les", start: 5.02 },
        { word: "montagnes", start: 5.17 },
        { word: "du", start: 5.53 },
        { word: "sud-ouest", start: 5.68 },
        { word: "de", start: 6.15 },
        { word: "la", start: 6.30 },
        { word: "Chine", start: 6.42 },
        { word: "actuelle,", start: 6.77 },
        { word: "bien", start: 7.15 },
        { word: "loin", start: 7.34 },
        { word: "de", start: 7.50 },
        { word: "la", start: 7.65 },
        { word: "mer.", start: 7.78 },
        { word: "Mais", start: 8.22 },
        { word: "un", start: 8.52 },
        { word: "√©v√©nement", start: 8.66 },
        { word: "tragique", start: 9.12 },
        { word: "vient", start: 9.48 },
        { word: "modifier", start: 9.77 },
        { word: "le", start: 10.11 },
        { word: "cours", start: 10.27 },
        { word: "de", start: 10.41 },
        { word: "sa", start: 10.54 },
        { word: "vie.", start: 10.67 },
        { word: "√Ä", start: 11.21 },
        { word: "treize", start: 11.31 },
        { word: "ans,", start: 11.55 },
        { word: "il", start: 11.76 },
        { word: "est", start: 12.08 },
        { word: "captur√©", start: 12.36 },
        { word: "par", start: 12.71 },
        { word: "l‚Äôarm√©e", start: 12.91 },
        { word: "imp√©riale.", start: 13.20 },
        { word: "Il", start: 13.72 },
        { word: "sera", start: 13.97 },
        { word: "alors", start: 14.22 },
        { word: "forc√©", start: 14.45 },
        { word: "de", start: 14.66 },
        { word: "servir", start: 14.88 },
        { word: "l‚Äôempereur", start: 15.07 },
        { word: "√†", start: 15.33 },
        { word: "la", start: 15.43 },
        { word: "cour.", start: 15.52 },
        { word: "Au", start: 15.99 },
        { word: "fil", start: 16.18 },
        { word: "du", start: 16.33 },
        { word: "temps,", start: 16.45 },
        { word: "Zheng", start: 16.81 },
        { word: "He", start: 16.98 },
        { word: "r√©ussit", start: 17.32 },
        { word: "√†", start: 17.62 },
        { word: "se", start: 17.76 },
        { word: "distinguer", start: 17.93 },
        { word: "et", start: 18.26 },
        { word: "√†", start: 18.44 },
        { word: "se", start: 18.55 },
        { word: "faire", start: 18.68 },
        { word: "remarquer", start: 18.92 },
        { word: "par", start: 19.16 },
        { word: "l‚Äôempereur.", start: 19.39 },
        { word: "Il", start: 19.85 },
        { word: "devient", start: 19.99 },
        { word: "ainsi", start: 20.19 },
        { word: "son", start: 20.39 },
        { word: "plus", start: 20.58 },
        { word: "fid√®le", start: 20.82 },
        { word: "conseiller.", start: 21.15 },
        { word: "Vers", start: 21.75 },
        { word: "1405,", start: 21.90 },
        { word: "l‚Äôempereur", start: 22.21 },
        { word: "confie", start: 22.40 },
        { word: "√†", start: 22.62 },
        { word: "Zheng", start: 22.81 },
        { word: "He", start: 22.98 },
        { word: "une", start: 23.17 },
        { word: "flotte", start: 23.34 },
        { word: "gigantesque", start: 23.60 },
        { word: "qui", start: 23.91 },
        { word: "compte", start: 24.06 },
        { word: "deux-cent-cinquante-cinq", start: 24.27 },
        { word: "navires.", start: 24.75 },
        { word: "Zheng", start: 25.22 },
        { word: "He", start: 25.38 },
        { word: "explore", start: 25.66 },
        { word: "alors", start: 25.96 },
        { word: "les", start: 26.18 },
        { word: "√Æles", start: 26.30 },
        { word: "de", start: 26.46 },
        { word: "l‚Äôoc√©an", start: 26.65 },
        { word: "Indien,", start: 26.94 },
        { word: "puis", start: 27.18 },
        { word: "se", start: 27.35 },
        { word: "rend", start: 27.51 },
        { word: "en", start: 27.61 },
        { word: "√âgypte.", start: 27.90 }
      ];

      const display = document.getElementById("wordDisplay");
      const audio = document.getElementById("audioSlow");
      let currentIndex = 0;
      let rafID = null;

      function syncWords() {
        const currentTime = audio.currentTime;
        if (currentIndex < timedWords.length && currentTime >= timedWords[currentIndex].start) {
          display.textContent = timedWords[currentIndex].word;
          currentIndex++;
        }
        if (!audio.paused && !audio.ended) {
          rafID = requestAnimationFrame(syncWords);
        }
      }

      audio.addEventListener("play", () => {
        currentIndex = 0;
        cancelAnimationFrame(rafID);
        rafID = requestAnimationFrame(syncWords);
      });

      audio.addEventListener("pause", () => {
        cancelAnimationFrame(rafID);
      });

      audio.addEventListener("ended", () => {
        cancelAnimationFrame(rafID);
      });

      window.audioJump = function(id, seconds) {
        const audioElem = document.getElementById(id);
        audioElem.currentTime += seconds;
      };
    });
  </script>
</body>
</html>
