
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Mot MÃªlÃ© â€“ Fernand de Magellan</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 20px;
      min-height: 100vh;
      display: flex;
      flex-direction: row;
      justify-content: center;
      gap: 40px;
      background: linear-gradient(120deg, #b3e0fc 0%, #53b7e8 50%, #24577a 100%);
    }
    .left-section {
      max-width: 70vw;
    }
    h1 {
      color: #0d47a1;
      text-align: center;
      letter-spacing: 1px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(15, 35px);
      grid-gap: 2px;
      justify-content: center;
      margin-top: 20px;
    }
    .cell {
      width: 35px;
      height: 35px;
      background: #fff;
      border: 1px solid #ccc;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      cursor: pointer;
      user-select: none;
      transition: background 0.2s, color 0.2s;
    }
    .cell.selected {
      background-color: #ffcc80;
    }
    .cell.found {
      background-color: #1996bf;
      color: #fff;
    }
    .word-list {
      max-width: 300px;
    }
    .word-item {
      padding: 8px 14px;
      margin: 6px;
      border: 1px solid #ccc;
      border-radius: 8px;
      background: #fff;
      font-weight: bold;
      text-align: center;
      font-size: 16px;
    }
    .word-item.found {
      display: none;
    }
    button {
      margin-top: 15px;
      padding: 8px 16px;
      font-size: 16px;
      background: #0d47a1;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.2s;
    }
    button:hover {
      background: #1996bf;
    }
    .boat-illu {
      width: 100%;
      max-width: 370px;
      height: auto;
      display: block;
      margin: 20px auto 0 auto;
    }
  </style>
</head>
<body>
  <div class="left-section">
    <h1>ðŸŒŠ Mot MÃªlÃ© â€“ Fernand de Magellan</h1>
    <p style="text-align:center">Tape les lettres dans l'ordre, puis appuie sur "Valider le mot".</p>
    <div id="grid" class="grid"></div>
    <div style="text-align:center">
      <button onclick="validateWord()">Valider le mot</button>
    </div>
    <!-- Illustration caravelle style BD -->
    <svg class="boat-illu" viewBox="0 0 400 180">
      <ellipse cx="200" cy="170" rx="130" ry="15" fill="#1976d2" opacity="0.22"/>
      <rect x="180" y="60" width="12" height="60" fill="#9e9e9e"/>
      <polygon points="186,60 186,100 150,95" fill="#fffbe6" stroke="#d4b678" stroke-width="2"/>
      <polygon points="192,60 192,110 230,105" fill="#fffbe6" stroke="#d4b678" stroke-width="2"/>
      <polygon points="185,120 195,120 205,160 175,160" fill="#d7ccc8" stroke="#836950" stroke-width="2"/>
      <ellipse cx="190" cy="160" rx="30" ry="8" fill="#6d4c41"/>
      <rect x="145" y="95" width="15" height="8" fill="#6d4c41" stroke="#836950" stroke-width="1"/>
      <rect x="215" y="105" width="15" height="8" fill="#6d4c41" stroke="#836950" stroke-width="1"/>
      <circle cx="200" cy="170" r="3" fill="#333"/>
      <text x="200" y="40" text-anchor="middle" font-size="26" fill="#1976d2" opacity="0.18" font-family="Verdana">Magellan</text>
    </svg>
  </div>
  <div class="word-list" id="wordList"></div>

  <script>
    const words = [
      "NAVIGATEUR", "PORTUGAIS", "SIECLE", "EXPEDITION", "REUSSIR",
      "TOUR", "MONDE", "PRENDRE", "SOUTENIR", "EMPEREUR",
      "DECOUVRIR", "DETROIT", "PASSAGE", "REJOINDRE", "OCEAN",
      "PACIFIQUE", "ACCOMPLIR", "MARIN", "PHILIPPINES", "BATAILLE"
    ];

    const gridSize = 15;
    const grid = Array.from({ length: gridSize }, () => Array(gridSize).fill(''));
    let selectedCells = [];

    function placeWord(word) {
      let placed = false;
      let tryCount = 0;
      while (!placed && tryCount < 200) {
        tryCount++;
        const dir = Math.floor(Math.random() * 2); // 0 = horiz, 1 = vert
        const x = Math.floor(Math.random() * (dir ? gridSize : gridSize - word.length));
        const y = Math.floor(Math.random() * (dir ? gridSize - word.length : gridSize));
        let fits = true;
        for (let i = 0; i < word.length; i++) {
          const cx = dir ? x : x + i;
          const cy = dir ? y + i : y;
          if (grid[cy][cx] && grid[cy][cx] !== word[i]) {
            fits = false;
            break;
          }
        }
        if (!fits) continue;
        for (let i = 0; i < word.length; i++) {
          const cx = dir ? x : x + i;
          const cy = dir ? y + i : y;
          grid[cy][cx] = word[i];
        }
        placed = true;
      }
    }

    words.forEach(placeWord);

    for (let y = 0; y < gridSize; y++) {
      for (let x = 0; x < gridSize; x++) {
        if (!grid[y][x]) grid[y][x] = String.fromCharCode(65 + Math.floor(Math.random() * 26));
      }
    }

    const gridElement = document.getElementById("grid");
    function createCell(x, y, letter) {
      const div = document.createElement("div");
      div.classList.add("cell");
      div.textContent = letter;
      div.dataset.x = x;
      div.dataset.y = y;
      div.dataset.letter = letter;
      div.addEventListener("click", () => {
        if (!div.classList.contains("selected")) {
          div.classList.add("selected");
          selectedCells.push(div);
        }
      });
      return div;
    }

    for (let y = 0; y < gridSize; y++) {
      for (let x = 0; x < gridSize; x++) {
        const cell = createCell(x, y, grid[y][x]);
        gridElement.appendChild(cell);
      }
    }

    function validateWord() {
      if (!selectedCells.length) return;
      const selectedWord = selectedCells.map(c => c.dataset.letter).join("");
      const reverseWord = selectedWord.split("").reverse().join("");
      const match = words.find(w => w === selectedWord || w === reverseWord);
      if (match) {
        selectedCells.forEach(c => {
          c.classList.remove("selected");
          c.classList.add("found");
        });
        document.querySelectorAll(".word-item").forEach(w => {
          if (w.textContent === match) w.classList.add("found");
        });
      } else {
        selectedCells.forEach(c => c.classList.remove("selected"));
      }
      selectedCells = [];
    }

    const wordListElement = document.getElementById("wordList");
    words.forEach(w => {
      const item = document.createElement("div");
      item.classList.add("word-item");
      item.textContent = w;
      wordListElement.appendChild(item);
    });
  </script>
</body>
</html>
